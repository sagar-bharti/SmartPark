<!DOCTYPE html>
<html>
<head>
  <title>Smart Parking ‚Äì Payment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      min-height:100vh;
      margin:0;
      padding:40px 15px;
      background: linear-gradient(135deg,#89f7fe,#66a6ff);
      display:flex;
      justify-content:center;
      align-items:flex-start;
      font-family: Arial;
    }

    .box{
      width:100%;
      max-width:520px;
      background: rgba(255,255,255,0.75);
      backdrop-filter: blur(14px);
      padding:30px;
      border-radius:20px;
      box-shadow:0 25px 60px rgba(0,0,0,0.25);
    }

    input, button, textarea {
      width:100%;
      padding:12px;
      margin:10px 0;
      border-radius:8px;
      border:1px solid #ddd;
    }

    button {
      background:#2ecc71;
      color:white;
      border:none;
      font-size:16px;
      cursor:pointer;
    }

    .pay-btn { background:#3498db; }
    .hidden { display:none; }
    .success { text-align:center; }

    /* ‚≠ê Rating */
    .stars {
      display:flex;
      justify-content:center;
      gap:8px;
      font-size:30px;
      cursor:pointer;
    }

    .star { color:#ccc; transition:0.3s; }
    .star.active { color:#f1c40f; transform:scale(1.2); }

    textarea { resize:none; height:90px; }

    .ticket {
      margin-top:20px;
      padding:15px;
      border:2px dashed #2ecc71;
      border-radius:8px;
    }
  </style>
</head>

<body>

<div class="box">

  <!-- BOOKING -->
  <div id="bookingSection">
    <h2>Complete Your Booking</h2>
    <h3>City Center Parking</h3>
    <p><b>Rate:</b> ‚Çπ<span id="rate">10</span>/hr</p>

    <input type="number" id="hours" placeholder="Booking Duration (hours)" min="1">
    <p><b>Total Amount:</b> ‚Çπ<span id="total">0</span></p>

    <button class="pay-btn" onclick="goToPayment()">Next ‚Üí Payment</button>
  </div>

  <!-- PAYMENT -->
  <div id="paymentSection" class="hidden">
    <h2>Select Payment Method</h2>
    <p>Total Payable: ‚Çπ<span id="payAmount"></span></p>

    <button onclick="pay('card')">üí≥ Card</button>
    <button onclick="pay('upi')">üì± UPI</button>
    <button onclick="pay('qr')">üì∑ Scan QR</button>

    <div id="payBox"></div>
  </div>

  <!-- SUCCESS -->
  <div id="successSection" class="hidden success">
    <h2>üéâ Booking Confirmed</h2>
    <p>Your parking slot is reserved.</p>

    <div id="bookingInfo"></div>

    <div class="ticket">
      <h3>üé´ Parking Ticket</h3>
      <p><b>Slot Number:</b> <span id="slotNum"></span></p>
    </div>

    <h3>Rate Your Experience</h3>
    <div class="stars">
      <span class="star" onclick="rateStar(1)">‚òÖ</span>
      <span class="star" onclick="rateStar(2)">‚òÖ</span>
      <span class="star" onclick="rateStar(3)">‚òÖ</span>
      <span class="star" onclick="rateStar(4)">‚òÖ</span>
      <span class="star" onclick="rateStar(5)">‚òÖ</span>
    </div>

    <textarea placeholder="Write your feedback here..."></textarea>
    <button onclick="submitFeedback()">Submit Feedback</button>
  </div>

</div>

<script>
/* BASIC CALCULATION */
let rate = 10;
let totalAmount = 0;

document.getElementById("hours").addEventListener("input", function () {
  totalAmount = this.value * rate || 0;
  document.getElementById("total").innerText = totalAmount;
});

/* GO TO PAYMENT */
function goToPayment() {
  const hours = document.getElementById("hours").value;
  if (!hours || hours <= 0) {
    alert("Please enter valid hours");
    return;
  }
  document.getElementById("bookingSection").classList.add("hidden");
  document.getElementById("paymentSection").classList.remove("hidden");
  document.getElementById("payAmount").innerText = totalAmount;
}

/* PAYMENT OPTIONS */
function pay(type) {
  const box = document.getElementById("payBox");
  box.innerHTML = `
    <button type="button" onclick="success()">Pay ‚Çπ${totalAmount}</button>
  `;
}

/* SUCCESS */
function success() {
  document.getElementById("paymentSection").classList.add("hidden");
  document.getElementById("successSection").classList.remove("hidden");

  const params = new URLSearchParams(window.location.search);
  const userName = params.get("uName") || "Guest";
  const vehicleNum = params.get("vNum") || "N/A";

  document.getElementById("bookingInfo").innerHTML = `
    <p><b>Name:</b> ${userName}</p>
    <p><b>Vehicle Number:</b> ${vehicleNum}</p>
  `;

  const slot = Math.floor(Math.random() * (500 - 101 + 1)) + 101;
  document.getElementById("slotNum").innerText = slot;
}

/* RATING */
let selectedRating = 0;

function rateStar(rating) {
  selectedRating = rating;
  document.querySelectorAll(".star").forEach((s,i)=>{
    s.classList.toggle("active", i < rating);
  });
}

function submitFeedback() {
  if (selectedRating === 0) {
    alert("Please give a rating ‚≠ê");
    return;
  }
  alert("Thank you for your feedback ‚ù§Ô∏è");
}
</script>

</body>
</html>
