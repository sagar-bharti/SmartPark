<!DOCTYPE html>
<html>
<head>
  <title>Smart Parking â€“ Payment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; background:#f5f7fa; padding:20px; }
    .box { max-width:500px; margin:auto; background:white; padding:20px; border-radius:10px; }
    input, button { width:100%; padding:12px; margin:10px 0; }
    button { background:#2ecc71; color:white; border:none; font-size:16px; cursor:pointer; }
    .pay-btn { background:#3498db; }
    .hidden { display:none; }
    .success { text-align:center; }
  </style>
</head>
<body>

<div class="box">

  <!-- BOOKING SECTION -->
  <div id="bookingSection">
    <h2>Complete Your Booking</h2>

    <p><b>Parking:</b> City Center Parking</p>
    <p><b>Rate:</b> â‚¹<span id="rate">10</span>/hr</p>

    <input type="number" id="hours" placeholder="Booking Duration (hours)" min="1">
    <p><b>Total Amount:</b> â‚¹<span id="total">0</span></p>

    <button class="pay-btn" onclick="goToPayment()">Next â†’ Payment</button>
  </div>

  <!-- PAYMENT SECTION -->
  <div id="paymentSection" class="hidden">
    <h2>Select Payment Method</h2>
    <p>Total Payable: â‚¹<span id="payAmount"></span></p>

    <button onclick="pay('card')">ðŸ’³ Card</button>
    <button onclick="pay('upi')">ðŸ“± UPI</button>
    <button onclick="pay('qr')">ðŸ“· Scan QR</button>

    <div id="payBox"></div>
  </div>

  <!-- SUCCESS SECTION -->
  <div id="successSection" class="hidden success">
    <h2>ðŸŽ‰ Booking Confirmed</h2>
    <p>Your parking slot is reserved.</p>

    <div id="bookingInfo" style="margin-top:15px;"></div>

    <div style="
      margin-top:20px;
      padding:15px;
      border:2px dashed #2ecc71;
      border-radius:8px;
    ">
      <h3>ðŸŽ« Parking Ticket</h3>
      <p><b>Slot Number:</b> <span id="slotNum"></span></p>
    </div>
  </div>

</div>

<script>
/* ---------------- BASIC CALCULATION ---------------- */
let rate = 10;
let totalAmount = 0;

document.getElementById("hours").addEventListener("input", function () {
  totalAmount = this.value * rate || 0;
  document.getElementById("total").innerText = totalAmount;
});

/* ---------------- STEP 1: GO TO PAYMENT ---------------- */
function goToPayment() {
  const hours = document.getElementById("hours").value;

  if (!hours || hours <= 0) {
    alert("Please enter valid hours");
    return;
  }

  document.getElementById("bookingSection").classList.add("hidden");
  document.getElementById("paymentSection").classList.remove("hidden");
  document.getElementById("payAmount").innerText = totalAmount;
}

/* ---------------- STEP 2: PAYMENT OPTIONS ---------------- */
function pay(type) {
  const box = document.getElementById("payBox");

  if (type === "card") {
    box.innerHTML = `
      <input placeholder="Card Number" maxlength="16">
      <input placeholder="MM/YY" maxlength="5">
      <input placeholder="CVV" maxlength="3">
      <button type="button" onclick="success()">Pay â‚¹${totalAmount}</button>
    `;
  }

  if (type === "upi") {
    box.innerHTML = `
      <input placeholder="Enter UPI ID">
      <button type="button" onclick="success()">Pay â‚¹${totalAmount}</button>
    `;
  }

  if (type === "qr") {
    box.innerHTML = `
      <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=SmartParking|Amount:${totalAmount}">
      <button type="button" onclick="success()">Payment Done</button>
    `;
  }
}

/* ---------------- STEP 3: PAYMENT SUCCESS ---------------- */
function success() {
  document.getElementById("paymentSection").classList.add("hidden");
  document.getElementById("successSection").classList.remove("hidden");

  // URL se booking details uthana
  const params = new URLSearchParams(window.location.search);
  const userName = params.get("uName") || "N/A";
  const vehicleNum = params.get("vNum") || "N/A";

  document.getElementById("bookingInfo").innerHTML = `
    <p><b>Name:</b> ${userName}</p>
    <p><b>Vehicle Number:</b> ${vehicleNum}</p>
  `;

  // Random slot number (101â€“500)
  const slot = Math.floor(Math.random() * (500 - 101 + 1)) + 101;
  document.getElementById("slotNum").innerText = slot;
}
</script>

</body>
</html>
